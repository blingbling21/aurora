# Aurora Indicators 快速参考

## 指标分类速查表

### 趋势型指标 (4个)

| 指标 | 中文名称 | 典型周期 | 主要用途 | 返回值 |
|------|---------|---------|---------|--------|
| MA | 移动平均线 | 5, 10, 20, 50, 200 | 识别趋势方向 | 平均价格 |
| EMA | 指数移动平均线 | 12, 26 | 快速响应趋势 | 加权平均价格 |
| MACD | 移动平均收敛散度 | 12, 26, 9 | 趋势变化和买卖时机 | MACD/Signal/Histogram |
| ADX | 平均动向指数 | 14 | 趋势强度(不判断方向) | ADX/+DI/-DI |

### 动量型指标 (5个)

| 指标 | 中文名称 | 典型周期 | 超买阈值 | 超卖阈值 | 返回值范围 |
|------|---------|---------|----------|----------|-----------|
| RSI | 相对强弱指数 | 14 | > 70 | < 30 | 0 - 100 |
| Stochastic | 随机震荡指标 | 14, 3 | > 80 | < 20 | 0 - 100 |
| ROC | 变动率指标 | 10, 12 | 极值 | 极值 | 无限制(%) |
| CCI | 商品通道指数 | 20 | > +100 | < -100 | 无限制 |
| Williams %R | 威廉指标 | 14 | > -20 | < -80 | 0 到 -100 |

### 波动率型指标 (3个)

| 指标 | 中文名称 | 典型周期 | 主要用途 | 返回值 |
|------|---------|---------|---------|--------|
| Bollinger Bands | 布林带 | 20, 2σ | 价格通道,波动率 | Upper/Middle/Lower |
| ATR | 平均真实波幅 | 14 | 波动率,设置止损 | 波动幅度 |
| StdDev | 标准差 | 20 | 波动率测量 | 标准差值 |

### 成交量型指标 (1个)

| 指标 | 中文名称 | 典型周期 | 主要用途 | 返回值 |
|------|---------|---------|---------|--------|
| OBV | 能量潮 | 无 | 成交量趋势 | 累积成交量 |

## 常用组合策略

### 1. 趋势跟踪策略
```rust
// MA + MACD + ADX
let ma_trend = close > ma.update(close)?;  // 价格在MA上方
let macd_bullish = macd.update(close)?.histogram > 0.0;  // MACD柱状图为正
let strong_trend = adx.update(h, l, c)?.adx > 25.0;  // 强趋势

let signal = ma_trend && macd_bullish && strong_trend;
```

### 2. 超买超卖策略
```rust
// RSI + Williams %R + CCI
let rsi = rsi.update(close)?;
let wr = williams_r.update(high, low, close)?;
let cci = cci.update(high, low, close)?;

let oversold = rsi < 30.0 && wr < -80.0 && cci < -100.0;
let overbought = rsi > 70.0 && wr > -20.0 && cci > 100.0;
```

### 3. 突破策略
```rust
// Bollinger Bands + ATR + StdDev
let bb = bollinger.update(close)?;
let atr = atr.update(high, low, close)?;
let std = stddev.update(close)?;

// 突破上轨且波动率扩大
let breakout = close > bb.upper && atr > atr_threshold && std > std_threshold;
```

### 4. 动量反转策略
```rust
// ROC + Stochastic + Williams %R
let roc = roc.update(close)?;
let stoch = stochastic.update(high, low, close)?;
let wr = williams_r.update(high, low, close)?;

// 动量衰减 + 超卖信号
let reversal = roc < 0.0 && stoch.k < 20.0 && wr < -80.0;
```

## 性能特征

| 指标 | 更新复杂度 | 内存占用 | 预热周期 | 流式处理 |
|------|-----------|---------|---------|---------|
| MA | O(1) | O(n) | n | ✅ |
| EMA | O(1) | O(1) | n | ✅ |
| RSI | O(1) | O(1) | n | ✅ |
| MACD | O(1) | O(1) | max(fast,slow)+signal | ✅ |
| Bollinger | O(n) | O(n) | n | ✅ |
| ATR | O(1) | O(1) | n | ✅ |
| Stochastic | O(n) | O(k+d) | k+d-1 | ✅ |
| OBV | O(1) | O(1) | 1 | ✅ |
| ADX | O(1) | O(1) | 2n | ✅ |
| ROC | O(1) | O(n) | n+1 | ✅ |
| CCI | O(n) | O(n) | n | ✅ |
| Williams %R | O(n) | O(n) | n | ✅ |
| StdDev | O(n) | O(n) | n | ✅ |

## API 速查

### 创建指标
```rust
// 简单构造
let ma = MA::new(20);
let ema = EMA::new(12);
let rsi = RSI::new(14);
let roc = ROC::new(10);
let cci = CCI::new(20);
let wr = WilliamsR::new(14);
let stddev = StdDev::new(20);

// 默认参数
let macd = MACD::default();  // (12, 26, 9)
let stoch = Stochastic::default();  // (14, 3)
let bb = BollingerBands::default();  // (20, 2.0)
let atr = ATR::default();  // 14
let adx = ADX::default();  // 14

// 自定义参数
let bb = BollingerBands::new(20, 2.5);
let macd = MACD::new(10, 20, 5);
let stoch = Stochastic::new(14, 3);
```

### 更新数据
```rust
// 单一价格输入
ma.update(close);
ema.update(close);
rsi.update(close);
roc.update(close);
stddev.update(close);

// 高低收输入
bb.update(close);  // 只需收盘价
atr.update(high, low, close);
stoch.update(high, low, close);
cci.update(high, low, close);
wr.update(high, low, close);
adx.update(high, low, close);

// 带成交量输入
obv.update(close, volume);
```

### 状态查询
```rust
// 通用方法
indicator.count();      // 已处理的数据点数量
indicator.is_ready();   // 是否已准备好输出
indicator.reset();      // 重置状态

// 指标特定方法
rsi.is_overbought();    // RSI > 70
rsi.is_oversold();      // RSI < 30
bb.percent_b(price);    // 计算%B
bb.bandwidth();         // 计算带宽
atr.stop_loss(price, multiplier, is_long);  // 计算止损
stddev.mean();          // 获取平均值
```

## 数据要求

| 指标 | 最少数据点 | 推荐数据点 | 输入字段 |
|------|-----------|-----------|---------|
| MA | period | period * 2 | close |
| EMA | period | period * 2 | close |
| RSI | period | period * 2 | close |
| MACD | fast + slow + signal | max * 3 | close |
| Bollinger | period | period * 2 | close |
| ATR | period | period * 2 | high, low, close |
| Stochastic | k_period + d_period | (k+d) * 2 | high, low, close |
| OBV | 1 | 20+ | close, volume |
| ADX | period * 2 | period * 3 | high, low, close |
| ROC | period + 1 | period * 2 | close |
| CCI | period | period * 2 | high, low, close |
| Williams %R | period | period * 2 | high, low, close |
| StdDev | period | period * 2 | close |

## 常见问题

### Q: 为什么前N个数据点返回None?
A: 指标需要足够的历史数据才能计算。使用 `is_ready()` 检查是否准备好。

### Q: 如何处理缺失数据?
A: 使用 `if let Some(value) = indicator.update(...)` 模式处理Option类型。

### Q: 指标如何重置?
A: 调用 `indicator.reset()` 方法清除所有历史状态。

### Q: 多个指标可以共享数据吗?
A: 可以,每个指标独立维护状态,相互不影响。

### Q: 如何选择合适的周期?
A: 根据交易时间框架:
- 日内交易: 较短周期 (5-20)
- 波段交易: 中等周期 (20-50)
- 趋势交易: 较长周期 (50-200)

### Q: 浮点数精度问题如何处理?
A: 所有指标都使用 f64,精度足够。比较时使用 `(a - b).abs() < 1e-10`。

## 最佳实践

1. **组合使用不同类型的指标**
   - 趋势 + 动量 + 波动率 = 完整的市场视角

2. **避免过度拟合**
   - 不要在同一策略中使用过多相关指标

3. **参数优化**
   - 使用历史数据回测找到最优参数

4. **风险管理**
   - 使用ATR设置动态止损
   - 结合StdDev评估市场波动

5. **信号确认**
   - 等待多个指标确认再执行交易
   - 使用成交量指标验证价格趋势
